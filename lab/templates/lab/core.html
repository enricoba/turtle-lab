<!--
turtle-lab.org
Copyright (C) 2017  Henrik Baran

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->

<script>
    // cover
    $(window).on('load', function() {
       $("#cover").hide();
    });

    // using jQuery
    function getCookie(name) {
        var cookieValue = null;
        if (document.cookie && document.cookie !== '') {
            var cookies = document.cookie.split(';');
            for (var i = 0; i < cookies.length; i++) {
                var cookie = jQuery.trim(cookies[i]);
                // Does this cookie string begin with the name we want?
                if (cookie.substring(0, name.length + 1) === (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }

    //var csrftoken = getCookie('csrftoken');
    var csrftoken = jQuery("[name=csrfmiddlewaretoken]").val();


    function csrfSafeMethod(method) {
        // these HTTP methods do not require CSRF protection
        return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
    }

    $.ajaxSetup({
        beforeSend: function(xhr, settings) {
            if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
                xhr.setRequestHeader("X-CSRFToken", csrftoken);
            }
        }
    });

    // VARIABLES
    var table_row_color = "#98ccff";

    $(document).ready(function(){
        $('[data-toggle="tooltip"]').tooltip();
    });

    // tables
    $('#id_table tbody tr').mousedown (function(event) {
        switch (event.which) {
            case 1:
                event.preventDefault();
                document.getSelection().removeAllRanges();
                $("#id_nav_btn_delete").removeClass('disabled').removeClass('btn-default').addClass('btn-danger');
                $("#id_nav_btn_edit").removeClass('disabled').removeClass('btn-default').addClass('btn-primary');
                $("#id_nav_btn_duplicate").removeClass('disabled').removeClass('btn-default').addClass('btn-success');
                $("#id_nav_btn_audit_trail").removeClass('disabled').removeClass('btn-default').addClass('btn-warning');
                $("#id_nav_btn_movement").removeClass('disabled').removeClass('btn-default').addClass('btn-info');
                $("#id_nav_btn_boxing").removeClass('disabled').removeClass('btn-default').addClass('btn-primary');
                $("#id_nav_btn_barcode").removeClass('disabled').removeClass('btn-default').addClass('btn-info');
                $("#id_nav_btn_password").removeClass('disabled').removeClass('btn-default').addClass('btn-info');
                $("#id_nav_btn_active").removeClass('disabled').removeClass('btn-default').addClass('btn-success');
                if (event.ctrlKey) {
                    event.preventDefault();
                    $(this).addClass('selected');
                    $(this).css("background-color", table_row_color);
                    $("#id_nav_btn_edit").addClass('disabled').removeClass('btn-primary').addClass('btn-default');
                    $("#id_nav_btn_duplicate").addClass('disabled').removeClass('btn-success').addClass('btn-default');
                    $("#id_nav_btn_audit_trail").addClass('disabled').removeClass('btn-warning').addClass('btn-default');
                    $("#id_nav_btn_movement").addClass('disabled').removeClass('btn-info').addClass('btn-default');
                    $("#id_nav_btn_boxing").addClass('disabled').removeClass('btn-primary').addClass('btn-default');
                    $("#id_nav_btn_barcode").addClass('disabled').removeClass('btn-info').addClass('btn-default');
                    $("#id_nav_btn_password").addClass('disabled').removeClass('btn-info').addClass('btn-default');
                    $("#id_nav_btn_active").addClass('disabled').removeClass('btn-success').addClass('btn-default');
                } else {
                    event.preventDefault();
                    if ($(this).hasClass('.clicked')) {
                        $(this).removeClass('selected');
                        $(this).removeClass('.clicked');
                        $(this).css("background-color", "");
                        $(this).attr('id', '');
                        $("#id_nav_btn_delete").addClass('disabled').removeClass('btn-danger').addClass('btn-default');
                        $("#id_nav_btn_edit").addClass('disabled').removeClass('btn-primary').addClass('btn-default');
                        $("#id_nav_btn_duplicate").addClass('disabled').removeClass('btn-success').addClass('btn-default');
                        $("#id_nav_btn_audit_trail").addClass('disabled').removeClass('btn-warning').addClass('btn-default');
                        $("#id_nav_btn_movement").addClass('disabled').removeClass('btn-info').addClass('btn-default');
                        $("#id_nav_btn_boxing").addClass('disabled').removeClass('btn-primary').addClass('btn-default');
                        $("#id_nav_btn_barcode").addClass('disabled').removeClass('btn-info').addClass('btn-default');
                        $("#id_nav_btn_password").addClass('disabled').removeClass('btn-info').addClass('btn-default');
                        $("#id_nav_btn_active").addClass('disabled').removeClass('btn-success').addClass('btn-default');
                    } else {
                        $(this).addClass('selected').siblings().removeClass('selected').removeClass('.clicked').attr('id', '').css("background-color", "");
                        $(this).css("background-color", table_row_color);
                        $(this).addClass('.clicked');
                        $(this).attr('id', 'id_unique');
                        //console.log($(this).find("td:first").text());
                    }
                }
                break;
            case 2:
                //alert('Middle Mouse button pressed.');
                break;
            case 3:
                //alert('Right Mouse button pressed.');
                break;
            default:
                //alert('You have a strange Mouse!');
        }
    });
</script>