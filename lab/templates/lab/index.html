<!--
turtle-lab.org
Copyright (C) 2017  Henrik Baran

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->


{% load widget_tweaks %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Turtle Lab</title>
    {% load static %}
    <!-- Stylesheet Bootstrap -->
    <link rel="stylesheet"
          href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
          integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
          crossorigin="anonymous">
    <!-- Custom -->
    <link rel="stylesheet" href="{% static "custom.css" %}">
    <!-- JS Font Awesome -->
    <script defer
            src="https://use.fontawesome.com/releases/v5.0.12/js/all.js"
            integrity="sha384-Voup2lBiiyZYkRto2XWqbzxHXwzcm4A5RfdfG6466bu5LqjwwrjXCMBQBLMWh7qR"
            crossorigin="anonymous"></script>
    <!-- Favicon -->
    <link rel="shortcut icon" href="{% static "favicon.ico" %}">
</head>
<body id="id_body" oncontextmenu="return false;">
    <!-- COVER -->
    <div id="cover" style="position: fixed; height: 100%; width: 100%; top: 0; left: 0; z-index: 9999; background: white"></div>

    <!-- SIDEBAR -->
    {% if content != 'index' %}
        <div class="sidebar" id="id_sidebar">
            <div>

            </div>

            <div>
                <ul class="sidebar-menu">
                    {% if 'overview' in perm %}
                        <li id="id_sidebar_menu_li_overview"><a href="/overview/"><i class="fas fa-home"></i><span> Overview</span></a></li>
                    {% endif %}
                    <li id="id_sidebar_menu_par_md"><a><i class="fas fa-database"></i><span> Master Data</span></a></li>
                        {% if 'co_r' in perm or 'co_w' in perm or 'co_d' in perm %}
                            <li id="id_sidebar_menu_li_conditions" class="sidebar-sub sidebar-sub-md sidebar-sub-vis"><a href="/conditions/"><span> Conditions</span></a></li>
                        {% endif %}
                        {% if 'lo_r' in perm or 'lo_w' in perm or 'lo_d' in perm or 'lo_l' in perm %}
                            <li id="id_sidebar_menu_li_locations" class="sidebar-sub sidebar-sub-md sidebar-sub-vis"><a href="/locations/"><span> Locations</span></a></li>
                        {% endif %}
                        {% if 'ty_r' in perm or 'ty_w' in perm or 'ty_d' in perm %}
                            <li id="id_sidebar_menu_li_types" class="sidebar-sub sidebar-sub-md sidebar-sub-vis"><a href="/types/"><span> Types</span></a></li>
                        {% endif %}
                        {% if 'ta_r' in perm or 'ta_w' in perm or 'ta_d' in perm %}
                            <li id="id_sidebar_menu_li_type_attributes" class="sidebar-sub sidebar-sub-md sidebar-sub-vis"><a href="/type_attributes/"><span> Type Attributes</span></a></li>
                        {% endif %}
                        {% if 'bt_r' in perm or 'bt_w' in perm or 'bt_d' in perm %}
                            <li id="id_sidebar_menu_li_box_types" class="sidebar-sub sidebar-sub-md sidebar-sub-vis"><a href="/box_types/"><span> Box Types</span></a></li>
                        {% endif %}
                        {% if 'bo_r' in perm or 'bo_w' in perm or 'bo_d' in perm or 'bo_l' in perm %}
                            <li id="id_sidebar_menu_li_boxes" class="sidebar-sub sidebar-sub-md sidebar-sub-vis"><a href="/boxes/"><span> Boxes</span></a></li>
                        {% endif %}
                        <!-- TODO can be removed later -->
                        <!-- <li class="sidebar-sub sidebar-sub-md sidebar-sub-vis"><a href="/reagents/"><span> Reagents</span></a></li>-->
                    <!-- REAGENTS -->
                    {% if 're_r' in perm or 're_w' in perm or 're_d' in perm or 're_l' in perm %}
                        <li id="id_sidebar_menu_par_re"><a><i class="fas fa-vials"></i><span> Reagents</span></a></li>
                        <!-- dynamic reagents -->
                        {% for reagent in reagents %}
                            <li id="id_sidebar_menu_li_{{ reagent }}" class="sidebar-sub sidebar-sub-re sidebar-sub-vis"><a href="/reagents/{{ reagent }}"><span> {{ reagent }}</span></a></li>
                        {% endfor %}
                    {% endif %}
                    <!-- SAMPLES -->
                    {% if 'sa_r' in perm or 'sa_w' in perm or 'sa_d' in perm or 'sa_l' in perm %}
                        <li id="id_sidebar_menu_par_sa"><a><i class="fas fa-flask"></i><span> Samples</span></a></li>
                        <!-- dynamic samples -->
                        {% for sample in samples %}
                            <li id="id_sidebar_menu_li_{{ sample }}" class="sidebar-sub sidebar-sub-sa sidebar-sub-vis"><a href="/reagents/{{ sample }}"><span> {{ sample }}</span></a></li>
                        {% endfor %}
                    {% endif %}
                    {% if 'log_mo' in perm or 'log_lo' in perm or 'log_la' in perm or 'log_bo' in perm %}
                        <li id="id_sidebar_menu_par_log"><a><i class="fas fa-history"></i><span> Logs</span></a></li>
                            {% if 'log_mo' in perm %}
                                <li id="id_sidebar_menu_li_movement_log" class="sidebar-sub sidebar-sub-log sidebar-sub-vis"><a href="/movement_log/"><span> Movements</span></a></li>
                            {% endif %}
                            {% if 'log_lo' in perm %}
                                <li id="id_sidebar_menu_li_login_log" class="sidebar-sub sidebar-sub-log sidebar-sub-vis"><a href="/login_log/"><span> Login</span></a></li>
                            {% endif %}
                            {% if 'log_la' in perm %}
                                <li id="id_sidebar_menu_li_label_log" class="sidebar-sub sidebar-sub-log sidebar-sub-vis"><a href="/label_log/"><span> Labels</span></a></li>
                            {% endif %}
                            {% if 'log_bo' in perm %}
                                <li id="id_sidebar_menu_li_boxing_log" class="sidebar-sub sidebar-sub-log sidebar-sub-vis"><a href="/boxing_log/"><span> Boxing</span></a></li>
                            {% endif %}
                    {% endif %}
                    {% if 'ro_r' in perm or 'ro_w' in perm or 'ro_d' in perm or 'us_r' in perm or 'us_w' in perm or 'us_a' in perm or 'us_p' in perm %}
                        <li id="id_sidebar_menu_par_ad"><a><i class="fas fa-cogs"></i><span> Administration</span></a></li>
                            {% if 'ro_r' in perm or 'ro_w' in perm or 'ro_d' in perm %}
                                <li id="id_sidebar_menu_li_roles" class="sidebar-sub sidebar-sub-ad sidebar-sub-vis"><a href="/roles/"><span> Roles</span></a></li>
                            {% endif %}
                            {% if 'us_r' in perm or 'us_w' in perm or 'us_a' in perm or 'us_p' in perm %}
                                <li id="id_sidebar_menu_li_users" class="sidebar-sub sidebar-sub-ad sidebar-sub-vis"><a href="/users/"><span> Users</span></a></li>
                            {% endif %}
                    {% endif %}
                </ul>
            </div>
            <div class="sidebar-bottom">
                Version: 0.1.0-alpha.3
            </div>
        </div>
    {% endif %}

    <!-- CONTROLBAR -->
    {% if tables or log %}
        <div id="id_controlbar" class="container-fluid top left">
            <!-- NAV -->
            <div class="btn-group-lg" role="group" style="float: left; margin-right: 40px">
                <button title="Navigation" id="id_nav_btn_sidebar" type="button" class="btn btn-default">
                    <i class="fas fa-bars"></i></button>
            </div>
            <div class="btn-group-lg" role="group" style="float: left;">
                <!-- Tables -->
                {% if content != 'movement_log' and content != 'home' and content != 'login_log' and content != 'label_log' and content != 'boxing_log' and content != 'overview' %}
                    <!-- Conditions -->
                    {% if content == 'conditions' and 'co_w' in perm %}
                        <button title="New" id="id_nav_btn_new" type="button" class="btn btn-success">
                            <i class="fas fa-plus"></i></button>
                        <button title="Duplicate" id="id_nav_btn_duplicate" type="button" class="btn btn-default disabled">
                            <i class="fas fa-copy"></i></button>
                        <button title="Edit" id="id_nav_btn_edit" type="button" class="btn btn-default disabled">
                            <i class="fas fa-edit"></i></button>
                        <!--<button id="id_nav_btn_import" type="button" class="btn btn-default">
                            <i class="fas fa-upload"></i></button>-->
                    {% endif %}
                    {% if content == 'conditions' and 'co_d' in perm %}
                        <button title="Delete" id="id_nav_btn_delete" type="button" class="btn btn-default disabled">
                            <i class="fas fa-trash-alt"></i></button>
                    {% endif %}
                    <!-- Locations -->
                    {% if content == 'locations' and 'lo_w' in perm %}
                        <button title="New" id="id_nav_btn_new" type="button" class="btn btn-success">
                            <i class="fas fa-plus"></i></button>
                        <button title="Duplicate" id="id_nav_btn_duplicate" type="button" class="btn btn-default disabled">
                            <i class="fas fa-copy"></i></button>
                        <button title="Edit" id="id_nav_btn_edit" type="button" class="btn btn-default disabled">
                            <i class="fas fa-edit"></i></button>
                        <!--<button id="id_nav_btn_import" type="button" class="btn btn-default">
                            <i class="fas fa-upload"></i></button>-->
                    {% endif %}
                    {% if content == 'locations' and 'lo_d' in perm %}
                        <button title="Delete" id="id_nav_btn_delete" type="button" class="btn btn-default disabled">
                            <i class="fas fa-trash-alt"></i></button>
                    {% endif %}
                    <!-- Types -->
                    {% if content == 'types' and 'ty_w' in perm %}
                        <button title="New" id="id_nav_btn_new" type="button" class="btn btn-success">
                            <i class="fas fa-plus"></i></button>
                        <button title="Duplicate" id="id_nav_btn_duplicate" type="button" class="btn btn-default disabled">
                            <i class="fas fa-copy"></i></button>
                        <button title="Edit" id="id_nav_btn_edit" type="button" class="btn btn-default disabled">
                            <i class="fas fa-edit"></i></button>
                        <!--<button id="id_nav_btn_import" type="button" class="btn btn-default">
                            <i class="fas fa-upload"></i></button>-->
                    {% endif %}
                    {% if content == 'types' and 'ty_d' in perm %}
                        <button title="Delete" id="id_nav_btn_delete" type="button" class="btn btn-default disabled">
                            <i class="fas fa-trash-alt"></i></button>
                    {% endif %}
                    <!-- Type attributes -->
                    {% if content == 'type_attributes' and 'ta_w' in perm %}
                        <button title="New" id="id_nav_btn_new" type="button" class="btn btn-success">
                            <i class="fas fa-plus"></i></button>
                        <button title="Duplicate" id="id_nav_btn_duplicate" type="button" class="btn btn-default disabled">
                            <i class="fas fa-copy"></i></button>
                        <button title="Edit" id="id_nav_btn_edit" type="button" class="btn btn-default disabled">
                            <i class="fas fa-edit"></i></button>
                        <!--<button id="id_nav_btn_import" type="button" class="btn btn-default">
                            <i class="fas fa-upload"></i></button>-->
                    {% endif %}
                    {% if content == 'type_attributes' and 'ta_d' in perm %}
                        <button title="Delete" id="id_nav_btn_delete" type="button" class="btn btn-default disabled">
                            <i class="fas fa-trash-alt"></i></button>
                    {% endif %}
                    <!-- Box Types -->
                    {% if content == 'box_types' and 'bt_w' in perm %}
                        <button title="New" id="id_nav_btn_new" type="button" class="btn btn-success">
                            <i class="fas fa-plus"></i></button>
                        <button title="Duplicate" id="id_nav_btn_duplicate" type="button" class="btn btn-default disabled">
                            <i class="fas fa-copy"></i></button>
                        <button title="Edit" id="id_nav_btn_edit" type="button" class="btn btn-default disabled">
                            <i class="fas fa-edit"></i></button>
                        <!--<button id="id_nav_btn_import" type="button" class="btn btn-default">
                            <i class="fas fa-upload"></i></button>-->
                    {% endif %}
                    {% if content == 'box_types' and 'bt_d' in perm %}
                        <button title="Delete" id="id_nav_btn_delete" type="button" class="btn btn-default disabled">
                            <i class="fas fa-trash-alt"></i></button>
                    {% endif %}
                    <!-- Reagents -->
                    {% if content == 'reagents' and 're_w' in perm %}
                        <button title="New" id="id_nav_btn_new" type="button" class="btn btn-success">
                            <i class="fas fa-plus"></i></button>
                        <button title="Duplicate" id="id_nav_btn_duplicate" type="button" class="btn btn-default disabled">
                            <i class="fas fa-copy"></i></button>
                        <button title="Edit" id="id_nav_btn_edit" type="button" class="btn btn-default disabled">
                            <i class="fas fa-edit"></i></button>
                        <!--<button id="id_nav_btn_import" type="button" class="btn btn-default">
                            <i class="fas fa-upload"></i></button>-->
                    {% endif %}
                    {% if content == 'reagents' and 're_d' in perm %}
                        <button title="Delete" id="id_nav_btn_delete" type="button" class="btn btn-default disabled">
                            <i class="fas fa-trash-alt"></i></button>
                    {% endif %}
                    <!-- Boxes -->
                    {% if content == 'boxes' and 'bo_w' in perm %}
                        <button title="New" id="id_nav_btn_new" type="button" class="btn btn-success">
                            <i class="fas fa-plus"></i></button>
                        <button title="Duplicate" id="id_nav_btn_duplicate" type="button" class="btn btn-default disabled">
                            <i class="fas fa-copy"></i></button>
                        <button title="Edit" id="id_nav_btn_edit" type="button" class="btn btn-default disabled">
                            <i class="fas fa-edit"></i></button>
                        <!--<button id="id_nav_btn_import" type="button" class="btn btn-default">
                            <i class="fas fa-upload"></i></button>-->
                    {% endif %}
                    {% if content == 'boxes' and 'bo_d' in perm %}
                        <button title="Delete" id="id_nav_btn_delete" type="button" class="btn btn-default disabled">
                            <i class="fas fa-trash-alt"></i></button>
                    {% endif %}
                    <!-- User -->
                    {% if content == 'users' and 'us_w' in perm %}
                        <button title="New" id="id_nav_btn_new" type="button" class="btn btn-success">
                            <i class="fas fa-plus"></i></button>
                        <button title="Edit" id="id_nav_btn_edit" type="button" class="btn btn-default disabled">
                            <i class="fas fa-edit"></i></button>
                    {% endif %}
                    {% if content == 'users' and 'us_p' in perm %}
                        <button title="Password reset" id="id_nav_btn_password" type="button" class="btn btn-default disabled">
                            <i class="fas fa-key"></i></button>
                    {% endif %}
                    {% if content == 'users' and 'us_a' in perm %}
                        <button title="Active / Inactive" id="id_nav_btn_active" type="button" class="btn btn-default disabled">
                            <i class="fas fa-user-check"></i></button>
                    {% endif %}
                    <!-- Roles -->
                    {% if content == 'roles' and 'ro_w' in perm %}
                        <button title="New" id="id_nav_btn_new" type="button" class="btn btn-success">
                            <i class="fas fa-plus"></i></button>
                        <button title="Duplicate" id="id_nav_btn_duplicate" type="button" class="btn btn-default disabled">
                            <i class="fas fa-copy"></i></button>
                        <button title="Edit" id="id_nav_btn_edit" type="button" class="btn btn-default disabled">
                            <i class="fas fa-edit"></i></button>
                        <!--<button id="id_nav_btn_import" type="button" class="btn btn-default">
                            <i class="fas fa-upload"></i></button>-->
                    {% endif %}
                    {% if content == 'roles' and 'ro_d' in perm %}
                        <button title="Delete" id="id_nav_btn_delete" type="button" class="btn btn-default disabled">
                            <i class="fas fa-trash-alt"></i></button>
                    {% endif %}
                    <!-- Label -->
                    {% if content == 'locations' and 'lo_l' in perm %}
                        <button title="Label print" id="id_nav_btn_barcode" type="button" class="btn btn-default disabled">
                            <i class="fas fa-barcode"></i></button>
                    {% endif %}
                    {% if content == 'samples' and 'sa_l' in perm %}
                        <button title="Label print" id="id_nav_btn_barcode" type="button" class="btn btn-default disabled">
                            <i class="fas fa-barcode"></i></button>
                    {% endif %}
                    {% if content == 'boxes' and 'bo_l' in perm %}
                        <button title="Label print" id="id_nav_btn_barcode" type="button" class="btn btn-default disabled">
                            <i class="fas fa-barcode"></i></button>
                    {% endif %}
                    {% if content == 'reagents' and 're_l' in perm %}
                        <button title="Label print" id="id_nav_btn_barcode" type="button" class="btn btn-default disabled">
                            <i class="fas fa-barcode"></i></button>
                    {% endif %}
                    <!-- Audit trail -->
                    <button title="Log record" id="id_nav_btn_audit_trail" type="button" class="btn btn-default disabled">
                        <i class="fas fa-clock"></i></button>
                {% endif %}
                <!-- Overview -->
                    <!-- MOVEMENT -->
                    {% if content == 'overview' and 'mo' in perm %}
                        <button title="Movement" id="id_nav_btn_movement" type="button" class="btn btn-default disabled">
                            <i class="fas fa-exchange-alt"></i></button>
                    {% endif %}
                    <!-- BOXING -->
                    {% if content == 'overview' and 'bo' in perm %}
                        <button title="Boxing" id="id_nav_btn_overview_boxing" type="button" class="btn btn-default disabled">
                            <i class="fas fa-th"></i></button>
                    {% endif %}
                <!-- Export -->
                    <button title="Export" id="id_nav_btn_export" type="button" class="btn btn-default">
                        <i class="fas fa-download"></i></button>
                <!-- UNUSED -->
                    <!-- TODO #16 -->
                    <!--<button id="id_nav_btn_filter" type="button" class="btn btn-default disabled">
                        <i class="fas fa-filter"></i></button>-->
            </div>
            <form style="float: left; padding-left: 5px;" onsubmit="return false">
                <div class="input-group" style="height: 46px;">
                    <span class="input-group-addon" id="basic-addon1"><i class="fas fa-search"></i></span>
                    <input id="id_search" style="height: 46px;" type="text" class="form-control" placeholder="Search"
                           aria-describedby="basic-addon1">
                </div>
            </form>


            {% if session %}
            <div class="btn-group-lg" role="group" style="float: right;">
                <button title="User" id="id_nav_btn_user" type="button" class="btn btn-default">
                    <i class="fas fa-lock" style="color: green"></i><span style="font-size: 14px;"> {{ user }}</span></button>
                <button title="Logout" id="id_nav_btn_logout" style="" type="button" class="btn btn-default">
                        <i class="fas fa-sign-out-alt"></i></button>
            </div>
            {% else %}
            <div class="btn-group-lg" role="group" style="float: right;">
                <button title="Logout" id="id_nav_btn_logout" type="button" class="btn btn-default">
                    <i class="fas fa-lock-OPEN" style="color: RED"></i> {{ user }}</button>
            </div>
            {% endif %}
        </div>
    {% endif %}

    <!-- TABLE HEAD -->
    {% if tables %}
        <div class="container-fluid top2 left">
            <table id="id_table_head" class="table table-auto">
                <thead>
                    <tr>
                        {% for head in header %}
                            <th>{{ head }}</th>
                        {% endfor %}
                    </tr>
                </thead>
            </table>
        </div>
    {% endif %}
    <!-- CONTENT -->
    <div id="id_content" class="container-fluid content {% if content != 'index' %}left{% endif %}">
        {% if tables %}
            <!-- Table -->
            <table id="id_table" class="table table-hover table-auto">
                <tbody>
                    {% block row %}
                        {% for row in query %}
                            {{ row|safe }}
                        {% endfor %}
                    {% endblock %}
                </tbody>
            </table>
            <div id="id_search_error" class="container-fluid search-error" style="display: none">
                <h1>no records have been found ...</h1>
            </div>
            <!-- NEW -->
            {% if content != 'movement_log' and content != 'home' and content != 'login_log' %}
                <div class="modal fade" id="id_modal_new" tabindex="-1" role="dialog" aria-labelledby="id_modal_new">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <!-- HEADER -->
                            <div class="modal-header">
                                <a type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></a>
                                <h4 class="modal-title" id="id_modal_new">New</h4>
                            </div>
                            <!-- BODY -->
                            <div class="modal-body">
                                <form id="id_form_new" onsubmit="return false">
                                    {% csrf_token %}
                                    <!-- SPECIFIC -->
                                    {% for field in modal_new %}
                                        <div class="form-group">
                                            {{ field.label_tag }}
                                            {% render_field field %}
                                            {% if field.help_text %}
                                                <small class="form-text text-muted">{{ field.help_text }}</small>
                                            {% endif %}
                                        </div>
                                    {% endfor %}
                                    <!-- DYNAMIC -->
                                    {% if content_dynamic %}
                                        {% for ta in type_attributes %}
                                            <div class="form-group">
                                                <label for="id_{{ ta.column }}">{{ ta.column }}:</label>
                                                {% if not ta.list_values %}
                                                    <input name="{{ ta.column }}" id="id_{{ ta.column }}" {% if ta.mandatory == True %} required=""{% endif %}
                                                           value="{{ ta.default_value }}" class="form-control" maxlength="255" type="text">
                                                {% else %}
                                                    <!-- TODO maybe manual required to work with edit -->
                                                    <select name="{{ ta.column }}" class="form-control" id="id_{{ ta.column }}">
                                                        {% for element in ta.list_values %}
                                                            <option {% if ta.default_value %} selected="selected"{% endif %} value="{{ element }}">{{ element }}</option>
                                                        {% endfor %}
                                                    </select>
                                                {% endif %}
                                            </div>
                                        {% endfor %}
                                    {% endif %}
                                </form>
                            </div>
                            <!-- FOOTER -->
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                <button type="button" class="btn btn-primary" data-dismiss="" id="id_submit_new">Save changes</button>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- DUPLICATE -->
                <div class="modal fade" id="id_modal_duplicate" tabindex="-1" role="dialog" aria-labelledby="id_modal_duplicate">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <!-- HEADER -->
                            <div class="modal-header">
                                <a type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></a>
                                <h4 class="modal-title" id="id_modal_duplicate">Duplicate</h4>
                            </div>
                            <!-- BODY -->
                            <div class="modal-body">
                                <form id="id_form_duplicate" onsubmit="return false">
                                    {% csrf_token %}
                                    <!-- SPECIFIC -->
                                    {% for field in modal_new %}
                                        <div class="form-group">
                                            {{ field.label_tag }}
                                            {% render_field field %}
                                            {% if field.help_text %}
                                                <small class="form-text text-muted">{{ field.help_text }}</small>
                                            {% endif %}
                                        </div>
                                    {% endfor %}
                                    <!-- DYNAMIC -->
                                    {% if content_dynamic %}
                                        {% for ta in type_attributes %}
                                            <div class="form-group">
                                                <label for="id_{{ ta.column }}">{{ ta.column }}:</label>
                                                {% if not ta.list_values %}
                                                    <input name="{{ ta.column }}" id="id_{{ ta.column }}" {% if ta.mandatory == True %} required=""{% endif %}
                                                           value="{{ ta.default_value }}" class="form-control" maxlength="255" type="text">
                                                {% else %}
                                                    <!-- TODO maybe manual required to work with edit -->
                                                    <select name="{{ ta.column }}" class="form-control" id="id_{{ ta.column }}">
                                                        {% for element in ta.list_values %}
                                                            <option {% if ta.default_value %} selected="selected"{% endif %} value="{{ element }}">{{ element }}</option>
                                                        {% endfor %}
                                                    </select>
                                                {% endif %}
                                            </div>
                                        {% endfor %}
                                    {% endif %}
                                </form>
                            </div>
                            <!-- FOOTER -->
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                <button type="button" class="btn btn-primary" data-dismiss="" id="id_submit_duplicate">Save changes</button>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- EDIT -->
                <div class="modal fade" id="id_modal_edit" tabindex="-1" role="dialog" aria-labelledby="id_modal_edit">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <!-- HEADER -->
                            <div class="modal-header">
                                <a type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></a>
                                <h4 class="modal-title" id="id_modal_edit">Edit</h4>
                            </div>
                            <!-- BODY -->
                            <div class="modal-body">
                                <form id="id_form_edit" onsubmit="return false">
                                    {% csrf_token %}
                                    <!-- SPECIFIC -->
                                    {% for field in modal_edit %}
                                        <div class="form-group">
                                            {{ field.label_tag }}
                                            {% render_field field %}
                                            {% if field.help_text %}
                                                <small class="form-text text-muted">{{ field.help_text }}</small>
                                            {% endif %}
                                        </div>
                                    {% endfor %}
                                    <!-- DYNAMIC -->
                                    {% if content_dynamic %}
                                        {% for ta in type_attributes %}
                                            <div class="form-group">
                                                <label for="id_{{ ta.column }}">{{ ta.column }}:</label>
                                                {% if not ta.list_values %}
                                                    <input name="{{ ta.column }}" id="id_{{ ta.column }}" {% if ta.mandatory == True %} required=""{% endif %}
                                                           value="{{ ta.default_value }}" class="form-control" maxlength="255" type="text">
                                                {% else %}
                                                    <!-- TODO maybe manual required to work with edit -->
                                                    <select name="{{ ta.column }}" class="form-control" id="id_{{ ta.column }}">
                                                        {% for element in ta.list_values %}
                                                            <option {% if ta.default_value %} selected="selected"{% endif %} value="{{ element }}">{{ element }}</option>
                                                        {% endfor %}
                                                    </select>
                                                {% endif %}
                                            </div>
                                        {% endfor %}
                                    {% endif %}
                                </form>
                            </div>
                            <!-- FOOTER -->
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                <button type="button" class="btn btn-primary" data-dismiss="" id="id_submit_edit">Save changes</button>
                            </div>
                        </div>
                    </div>
                </div>


                <!-- Audit Trail -->
                <div class="modal fade" id="id_modal_audit_trail" tabindex="-1" role="dialog" aria-labelledby="id_modal_audit_trail">
                    <div class="modal-dialog modal-lg" role="document">
                        <div class="modal-content">
                            <!-- HEADER -->
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title" id="id_modal_audit_trail">Log record</h4>
                            </div>
                            <!-- BODY -->
                            <div class="container-fluid">
                                <table class="table table-hover table-auto" id="id_table_audit_trail">
                                    <thead>
                                        <tr>
                                            <!-- SPECIFIC -->
                                            {% if header_audit_trail %}
                                                {% for head in header_audit_trail %}
                                                    <th>{{ head }}</th>
                                                {% endfor %}
                                            {% endif %}
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- SPECIFIC -->
                                    </tbody>
                                </table>
                            </div>
                            <!-- FOOTER -->
                            <div class="modal-footer">
                                <button style="float:left" id="id_nav_audit_trail_btn_export" type="button" class="btn btn-default">
                                         <i class="fas fa-download"></i></button>
                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                            </div>
                        </div>
                    </div>
                </div>
            {% endif %}

            <!-- HOME -->
            {% if content == 'overview' %}
                <!-- MOVEMENT -->
                <div class="modal fade" id="id_modal_movement" tabindex="-1" role="dialog" aria-labelledby="id_modal_movement">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <!-- HEADER -->
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title" id="id_modal_movement">Movement</h4>
                            </div>
                            <!-- BODY -->
                            <div class="modal-body">
                                <form id="id_form_movement" onsubmit="return false">
                                    {% csrf_token %}
                                    <!-- SPECIFIC -->
                                    {% for field in modal_movement %}
                                        <div class="form-group">
                                            {{ field.label_tag }}
                                            {% render_field field %}
                                            {% if field.help_text %}
                                                <small class="form-text text-muted">{{ field.help_text }}</small>
                                            {% endif %}
                                        </div>
                                    {% endfor %}
                                </form>
                            </div>
                            <!-- FOOTER -->
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                <button type="button" class="btn btn-primary" data-dismiss="" id="id_submit_movement">Save changes</button>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- BOXING -->
                <div class="modal fade" id="id_modal_boxing" tabindex="-1" role="dialog" aria-labelledby="id_modal_boxing">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <!-- HEADER -->
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title" id="id_modal_boxing">Boxing</h4>
                            </div>
                            <!-- BODY -->
                            <div class="modal-body">
                                <form id="id_form_boxing" onsubmit="return false">
                                    {% csrf_token %}
                                    <!-- SPECIFIC -->
                                    {% for field in modal_boxing %}
                                        <div class="form-group">
                                            {{ field.label_tag }}
                                            {% render_field field %}
                                            {% if field.help_text %}
                                                <small class="form-text text-muted">{{ field.help_text }}</small>
                                            {% endif %}
                                        </div>
                                    {% endfor %}
                                </form>
                            </div>
                            <!-- FOOTER -->
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                <button type="button" class="btn btn-primary" data-dismiss="" id="id_submit_boxing">Save changes</button>
                            </div>
                        </div>
                    </div>
                </div>
            {% endif %}

            <!-- LABELS -->
            {% if content == 'locations' or content == 'boxes' or content == 'reagents' %}
                <div class="modal fade" id="id_modal_label" tabindex="-1" role="dialog" aria-labelledby="id_modal_label">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <!-- HEADER -->
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title" id="id_modal_label">Label</h4>
                            </div>
                            <!-- BODY -->
                            <div class="modal-body" id="id_modal_label_body">

                            </div>
                            <!-- FOOTER -->
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                            </div>
                        </div>
                    </div>
                </div>
            {% endif %}

            <!-- OVERVIEW -->
            {% if content == 'overview' %}
                <!-- BOXING -->
                <div class="modal fade" id="id_modal_overview_boxing" tabindex="-1" role="dialog" aria-labelledby="id_modal_overview_boxing">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <!-- HEADER -->
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title" id="id_modal_overview_boxing">Boxing "<span id="id_overview_boxing_object"></span>"</h4>
                            </div>
                            <!-- BODY -->
                            <div class="modal-body">
                                <form id="id_form_overview_boxing" class="form-horizontal" onsubmit="return false">
                                    {% csrf_token %}
                                    <!-- SPECIFIC -->
                                    {% for field in modal_overview_boxing %}
                                        {% if field.label == 'Box' %}
                                        {% elif field.label == 'target_box' %}
                                        {% else %}
                                            <div class="form-group">
                                                <label class="col-sm-2 control-label">{{ field.label_tag }}</label>
                                                <div class="col-sm-10">
                                                    {% render_field field %}
                                                </div>
                                                {% if field.help_text %}
                                                    <small class="form-text text-muted">{{ field.help_text }}</small>
                                                {% endif %}
                                            </div>
                                        {% endif %}
                                    {% endfor %}
                                    <div class="form-group">
                                        <label class="col-sm-2 control-label">Location:</label>
                                        <div class="col-sm-10">
                                            <p class="form-control-static" id="id_overview_boxing_p_location"></p>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-2 control-label">Box:</label>
                                        <div class="col-sm-10">
                                            <p class="form-control-static" id="id_overview_boxing_p_box"></p>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-2 control-label">Position:</label>
                                        <div class="col-sm-10">
                                            <p class="form-control-static" id="id_overview_boxing_p_position"></p>
                                        </div>
                                    </div>
                                    {% for field in modal_overview_boxing %}
                                        {% if field.label == 'Box' %}
                                            <div class="form-group">
                                                <label class="col-sm-2 control-label">{{ field.label_tag }}</label>
                                                <div class="col-sm-10">
                                                    {% render_field field %}
                                                </div>
                                                {% if field.help_text %}
                                                    <small class="form-text text-muted">{{ field.help_text }}</small>
                                                {% endif %}
                                            </div>
                                        {% endif %}
                                    {% endfor %}
                                </form>
                            </div>
                            <!-- FOOTER -->
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                <button type="button" class="btn btn-primary" data-dismiss="" id="id_submit_overview_boxing">Save changes</button>
                            </div>
                        </div>
                    </div>
                </div>
            {% endif %}
        {% endif %}

        <!-- SPECIFIC CONTENT -->
        {% if content == 'index' %}
            <div class="container" style="max-width: 400px">
                <h1 style="text-align: center; margin-bottom: 20px">Please sign in</h1>
                <form id="id_form_login" onsubmit="return false">
                    {% csrf_token %}
                    {% for field in login %}
                        <div class="form-group has-feedback">
                            {% render_field field %}
                            {% if field.help_text %}
                                <small class="form-text text-muted">{{ field.help_text }}</small>
                            {% endif %}
                        </div>
                    {% endfor %}
                </form>
                <!-- BUTTON -->
                <button type="button" class="btn btn-primary btn-lg" id="id_submit_login" style="margin-top: 20px; width: 400px">Sign in</button>
            </div>
        {% endif %}

        <!-- PASSWORD RESET LOGIN -->
        {% if content == 'index' %}
            <div class="modal fade" id="id_modal_password" tabindex="-1" role="dialog" aria-labelledby="id_modal_password">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <!-- HEADER -->
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title" id="id_modal_password">Password</h4>
                        </div>
                        <!-- BODY -->
                        <div class="modal-body">
                            <form id="id_form_password">
                                {% csrf_token %}
                                <!-- SPECIFIC -->
                                {% for field in modal_password %}
                                    <div class="form-group">
                                        {{ field.label_tag }}
                                        {% render_field field %}
                                        {% if field.help_text %}
                                            <small class="form-text text-muted">{{ field.help_text }}</small>
                                        {% endif %}
                                    </div>
                                {% endfor %}
                            </form>
                        </div>
                        <!-- FOOTER -->
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                            <button type="button" class="btn btn-primary" data-dismiss="" id="id_submit_password">Save changes</button>
                        </div>
                    </div>
                </div>
            </div>
        {% endif %}

        <!-- PASSWORD RESET USERS -->
        {% if content == 'users' %}
            <div class="modal fade" id="id_modal_password_users" tabindex="-1" role="dialog" aria-labelledby="id_modal_password_users">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <!-- HEADER -->
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title" id="id_modal_password_users">Password</h4>
                        </div>
                        <!-- BODY -->
                        <div class="modal-body">
                            <form id="id_form_password_users">
                                {% csrf_token %}
                                <!-- SPECIFIC -->
                                {% for field in modal_password_users %}
                                    <div class="form-group">
                                        {{ field.label_tag }}
                                        {% render_field field %}
                                        {% if field.help_text %}
                                            <small class="form-text text-muted">{{ field.help_text }}</small>
                                        {% endif %}
                                    </div>
                                {% endfor %}
                            </form>
                        </div>
                        <!-- FOOTER -->
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                            <button type="button" class="btn btn-primary" data-dismiss="" id="id_submit_password_users">Save changes</button>
                        </div>
                    </div>
                </div>
            </div>
        {% endif %}
    </div>

    <script src="https://code.jquery.com/jquery-3.2.1.min.js"
            integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
			crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
            integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
            crossorigin="anonymous"></script>

    <!-- JS imports -->
    <script>
        {% include "lab/js/csrf.js" %}
        {% include "lab/js/core.js" %}
    </script>

    {% include "lab/logout.html" %}

    {% if tables %}
        {% include "lab/export.html" %}
        {% include "lab/import.html" %}
        {% include "lab/sidebar.html" %}
        <script>
            {% include "lab/js/search.js" %}
        </script>
        {% if content != 'movement_log' and content != 'home' and content != 'login_log' and content != 'boxing_log' %}
            {% include "lab/audittrail.html" %}
            {% include "lab/new.html" %}
            {% include "lab/duplicate.html" %}
            {% include "lab/edit.html" %}
            {% include "lab/delete.html" %}
            {% include "lab/form.html" %}
        {% endif %}
    {% endif %}

    {% if content == 'locations' or content == 'reagents' or content == 'boxes' %}
        {% include "lab/label.html" %}
    {% endif %}

    {% if content == 'overview' %}
        {% include "lab/overview_boxing.html" %}
        {% include "lab/movement.html" %}
        {% include "lab/form.html" %}
        <!-- get timezone on initial load -->
        <script>
            {% include "lab/js/timezone.js" %}
        </script>
    {% endif %}

    {% if content == 'users' %}
        {% include "lab/users_activate.html" %}
        {% include "lab/users_password.html" %}
    {% endif %}

    {% if content == 'index' %}
        {% include "lab/form.html" %}
        <script>
            {% include "lab/js/login.js" %}
        </script>
    {% endif %}
</body>
</html>
